{"version":3,"sources":["../src/rubric.js"],"names":["init","root","domElement","getContainer","registerActionListeners","displayChangesBasedOnData","level","radio","radioElements","querySelectorAll","forEach","element","classList","add","levelElements","querySelector","checked","addEventListener","e","button","target","closest","levelClick","defaultPrevented","key","event","keyCode","parent","parentElement","children","childNodes","child","isEqualNode","setAttribute","remove","removeAttribute"],"mappings":"+IAwBoB,QAAPA,CAAAA,IAAO,CAACC,CAAD,CAAU,IAGpBC,CAAAA,CAAU,CAAGD,CAAI,CAACE,YAAL,EAHO,CAI1BC,CAAuB,CAACF,CAAD,kCAAvB,CACAG,CAAyB,CAACH,CAAD,mEAC5B,C,IACKG,CAAAA,CAAyB,CAAG,SAACH,CAAD,CAAaI,CAAb,CAAoBC,CAApB,CAA8B,CAC5D,GAAMC,CAAAA,CAAa,CAAGN,CAAU,CAACO,gBAAX,CAA4BF,CAA5B,CAAtB,CACAC,CAAa,CAACE,OAAd,CAAsB,SAACC,CAAD,CAAa,CAC/BA,CAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,QAAtB,CACH,CAFD,EAGA,GAAMC,CAAAA,CAAa,CAAGZ,CAAU,CAACO,gBAAX,CAA4BH,CAA5B,CAAtB,CACAQ,CAAa,CAACJ,OAAd,CAAsB,SAACC,CAAD,CAAa,CAC/B,GAAIA,CAAO,CAACI,aAAR,CAAsB,mBAAtB,EAA2CC,OAA/C,CAAwD,CACpDL,CAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,SAAtB,CACH,CACJ,CAJD,CAKH,C,CAEKT,CAAuB,CAAG,SAACF,CAAD,CAAaI,CAAb,CAAuB,CACnDJ,CAAU,CAACe,gBAAX,CAA4B,OAA5B,CAAqC,SAACC,CAAD,CAAO,CACxC,GAAMC,CAAAA,CAAM,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiBf,CAAjB,CAAf,CACA,GAAIa,CAAJ,CAAY,CACRG,CAAU,CAACH,CAAD,CACb,CACJ,CALD,EAMAjB,CAAU,CAACe,gBAAX,CAA4B,SAA5B,CAAuC,SAACC,CAAD,CAAO,CAC1C,GAAIA,CAAC,CAACK,gBAAN,CAAwB,CACpB,MACH,CACD,GAAIjB,CAAJ,CAAW,IACDa,CAAAA,CAAM,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiBf,CAAjB,CADR,CAGHkB,CAAG,CAAGC,KAAK,CAACD,GAAN,EAAaC,KAAK,CAACC,OAHtB,CAIP,GAAY,OAAR,GAAAF,CAAG,EAAwB,OAAR,GAAAA,CAAnB,EAA8C,EAAR,GAAAA,CAA1C,CAAsD,CAClDF,CAAU,CAACH,CAAD,CACb,CACJ,CACJ,CAZD,CAaH,C,CAEKG,CAAU,CAAG,SAACX,CAAD,CAAa,IAGtBgB,CAAAA,CAAM,CAAGhB,CAAO,CAACiB,aAHK,CAItBC,CAAQ,CAAGF,CAAM,CAACG,UAJI,CAK5BD,CAAQ,CAACnB,OAAT,CAAiB,SAACqB,CAAD,CAAW,CACxB,GAAMxB,CAAAA,CAAK,CAAGwB,CAAK,CAAChB,aAAN,CAAoB,mBAApB,CAAd,CACA,GAAIgB,CAAK,CAACC,WAAN,CAAkBrB,CAAlB,CAAJ,CAAgC,CAC5BoB,CAAK,CAACnB,SAAN,CAAgBC,GAAhB,CAAoB,SAApB,EACAkB,CAAK,CAACE,YAAN,CAAmB,cAAnB,CAAmC,MAAnC,EACA1B,CAAK,CAAC0B,YAAN,CAAmB,SAAnB,CAA8B,MAA9B,CACH,CAJD,IAIO,CACHF,CAAK,CAACnB,SAAN,CAAgBsB,MAAhB,CAAuB,SAAvB,EACAH,CAAK,CAACE,YAAN,CAAmB,cAAnB,CAAmC,OAAnC,EACA1B,CAAK,CAAC4B,eAAN,CAAsB,SAAtB,CACH,CACJ,CAXD,EAYA,MAAOV,CAAAA,KACV,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module will tie together all of the different calls the gradable module will make.\n *\n * @module     gradingform_rubric/rubric\n * @package    core_grades\n * @copyright  2019 Mathew May <mathew.solutions>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = (root) => {\n    const level = `#rubric-advancedgrading .level`;\n    const radio = `#rubric-advancedgrading .radio`;\n    const domElement = root.getContainer();\n    registerActionListeners(domElement, level);\n    displayChangesBasedOnData(domElement, level, radio);\n};\nconst displayChangesBasedOnData = (domElement, level, radio) => {\n    const radioElements = domElement.querySelectorAll(radio);\n    radioElements.forEach((element) => {\n        element.classList.add('d-none');\n    });\n    const levelElements = domElement.querySelectorAll(level);\n    levelElements.forEach((element) => {\n        if (element.querySelector('input[type=radio]').checked) {\n            element.classList.add(\"checked\");\n        }\n    });\n};\n\nconst registerActionListeners = (domElement, level) => {\n    domElement.addEventListener('click', (e) => {\n        const button = e.target.closest(level);\n        if (button) {\n            levelClick(button);\n        }\n    });\n    domElement.addEventListener('keydown', (e) => {\n        if (e.defaultPrevented) {\n            return;\n        }\n        if (level) {\n            const button = e.target.closest(level);\n            // Use key_codes module here?\n            var key = event.key || event.keyCode;\n            if (key === 'Enter' || key === 'enter' || key === 13) {\n                levelClick(button);\n            }\n        }\n    });\n};\n\nconst levelClick = (element) => {\n    //event.classList.contains('level');\n\n    const parent = element.parentElement;\n    const children = parent.childNodes;\n    children.forEach((child) => {\n        const radio = child.querySelector('input[type=radio]');\n        if (child.isEqualNode(element)) {\n            child.classList.add('checked');\n            child.setAttribute('aria-checked', 'true');\n            radio.setAttribute('checked', 'true');\n        } else {\n            child.classList.remove('checked');\n            child.setAttribute('aria-checked', 'false');\n            radio.removeAttribute(\"checked\");\n        }\n    });\n    return event;\n};\n"],"file":"rubric.min.js"}