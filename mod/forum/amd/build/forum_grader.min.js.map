{"version":3,"sources":["../src/forum_grader.js"],"names":["define","$","ajax","notification","Repository","Templates","UnifiedGrader","returnPostsForum","forumid","userid","getDiscussionByUserID","then","context","render","html","js","UnifiedGrading","UnifiedGradingRenderModuleContent","catch","Notification","exception","ForumGrader","data","cmid"],"mappings":"AAsBAA,OAAM,0BAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAA6C,sBAA7C,CAAqE,gBAArE,CAAuF,4BAAvF,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgCC,CAAhC,CAA4CC,CAA5C,CAAuDC,CAAvD,CAAsE,CASlE,QAASC,CAAAA,CAAT,CAA0BC,CAA1B,CAAmC,CAC/B,MAAO,UAASC,CAAT,CAAiB,CACpBL,CAAU,CAACM,qBAAX,CAAiCD,CAAjC,CAAyCD,CAAzC,EACKG,IADL,CACU,SAASC,CAAT,CAAkB,CACpB,MAAOP,CAAAA,CAAS,CAACQ,MAAV,CAAiB,kCAAjB,CAAqDD,CAArD,CACV,CAHL,EAIKD,IAJL,CAIU,SAASG,CAAT,CAAeC,CAAf,CAAmB,CAErBT,CAAa,CAACU,cAAd,GACA,MAAOV,CAAAA,CAAa,CAACW,iCAAd,CAAgDH,CAAhD,CAAsDC,CAAtD,CACV,CARL,EASKG,KATL,CASWC,YAAY,CAACC,SATxB,CAUH,CACJ,CAeD,MATkB,SAAdC,CAAAA,WAAc,EAAW,IAErBZ,CAAAA,CAAM,CAAGR,CAAC,CAAC,kCAAD,CAAD,CAAoCqB,IAApC,CAAyC,cAAzC,CAFY,CAIrBC,CAAI,CAAGtB,CAAC,CAAC,kCAAD,CAAD,CAAoCqB,IAApC,CAAyC,MAAzC,CAJc,CAMzB,MAAOf,CAAAA,CAAgB,CAACgB,CAAD,CAAhB,CAAuBd,CAAvB,CACV,CAGJ,CAvCC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n * @module     mod_forum/forum_grader\n * @package    mod_forum\n * @copyright  2019 Mathew May <mathew.solutions>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/ajax', 'core/notification', 'mod_forum/repository', 'core/templates', 'core_grades/unified_grader'],\n    function($, ajax, notification, Repository, Templates, UnifiedGrader) {\n\n        /**\n         * UnifiedGrading class.\n         *\n         * @function returnPostsForum\n         * @param {int} forumid The id of the forum we will be using\n         * @return {mixed} Partially executed function we will use later\n         */\n        function returnPostsForum(forumid) {\n            return function(userid) {\n                Repository.getDiscussionByUserID(userid, forumid)\n                    .then(function(context) {\n                        return Templates.render('mod_forum/forum_discussion_posts', context);\n                    })\n                    .then(function(html, js) {\n                        // When this whole chain is moved to plugin then we will call the unified grader here passing html & js\n                        UnifiedGrader.UnifiedGrading();\n                        return UnifiedGrader.UnifiedGradingRenderModuleContent(html, js);\n                    })\n                    .catch(Notification.exception);\n            };\n        }\n        /**\n         * UnifiedGrading class.\n         *\n         * @class ForumGrader\n         */\n        var ForumGrader = function() {\n\n            var userid = $('[data-region=\"unified-grader\"]').data('first-userid');\n\n            var cmid = $('[data-region=\"unified-grader\"]').data('cmid');\n\n            return returnPostsForum(cmid)(userid);\n        };\n\n        return ForumGrader;\n    }\n);\n"],"file":"forum_grader.min.js"}