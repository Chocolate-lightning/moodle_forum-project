{"version":3,"sources":["../../../../../src/local/grades/local/grader/user_picker.js"],"names":["renderNavigator","Templates","render","renderUserChange","context","bindEvents","root","users","currentUserIndex","showUserCallback","addEventListener","e","button","target","closest","Selectors","actions","changeUser","parseInt","dataset","direction","showUser","user","total","length","displayIndex","Promise","all","html","userRegion","querySelector","regions","replaceNodeContents","buildPicker","currentUserID","document","createElement","findIndex","id"],"mappings":"oNAAA,OACA,O,ouCAEMA,CAAAA,CAAe,CAAG,UAAM,CAC1B,MAAOC,WAAUC,MAAV,CAAiB,iDAAjB,CAAoE,EAApE,CACV,C,CAEKC,CAAgB,CAAG,SAACC,CAAD,CAAa,CAClC,MAAOH,WAAUC,MAAV,CAAiB,sDAAjB,CAAyEE,CAAzE,CACV,C,CAEKC,CAAU,CAAG,SAACC,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CAAqD,CACpEH,CAAI,CAACI,gBAAL,CAAsB,OAAtB,CAA+B,SAACC,CAAD,CAAO,CAClC,GAAMC,CAAAA,CAAM,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiBC,UAAUC,OAAV,CAAkBC,UAAnC,CAAf,CACA,GAAIL,CAAJ,CAAY,CACRJ,CAAgB,EAAIU,QAAQ,CAACN,CAAM,CAACO,OAAP,CAAeC,SAAhB,CAA5B,CACAC,CAAQ,CAACf,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CACX,CACJ,CAND,CAOH,C,CAEKY,CAAQ,4CAAG,WAAMf,CAAN,CAAYC,CAAZ,CAAmBC,CAAnB,CAAqCC,CAArC,iGACPa,CADO,MAENf,CAAK,CAACC,CAAD,CAFC,EAGTe,KAAK,CAAEhB,CAAK,CAACiB,MAHJ,CAITC,YAAY,CAAEjB,CAAgB,CAAG,CAJxB,kBAMQkB,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACxB,CAAgB,CAACmB,CAAD,CAAjB,CAAyBb,CAAgB,CAACa,CAAD,CAAzC,CAAZ,CANR,0BAMNM,CANM,MAOPC,CAPO,CAOMvB,CAAI,CAACwB,aAAL,CAAmBf,UAAUgB,OAAV,CAAkBF,UAArC,CAPN,CAQb5B,UAAU+B,mBAAV,CAA8BH,CAA9B,CAA0CD,CAA1C,CAAgD,EAAhD,EARa,wCAAH,uD,CAWDK,CAAW,4CAAG,WAAM1B,CAAN,CAAa2B,CAAb,CAA4BzB,CAA5B,iGACnBH,CADmB,CACZ6B,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CADY,gBAGFV,CAAAA,OAAO,CAACC,GAAR,CAAY,CAAC3B,CAAe,EAAhB,CAAZ,CAHE,0BAGhB4B,CAHgB,MAIvB3B,UAAU+B,mBAAV,CAA8B1B,CAA9B,CAAoCsB,CAApC,CAA0C,EAA1C,EAEMpB,CANiB,CAMED,CAAK,CAAC8B,SAAN,CAAgB,SAACf,CAAD,CAAU,CAC/C,MAAOA,CAAAA,CAAI,CAACgB,EAAL,GAAYpB,QAAQ,CAACgB,CAAD,CAC9B,CAFwB,CANF,CAUvBb,CAAQ,CAACf,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CAAR,CAEAJ,CAAU,CAACC,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CAAV,CAZuB,yBAchBH,CAdgB,2CAAH,uD","sourcesContent":["import Templates from 'core/templates';\nimport Selectors from './user_picker/selectors';\n\nconst renderNavigator = () => {\n    return Templates.render('mod_forum/local/grades/local/grader/user_picker', {});\n};\n\nconst renderUserChange = (context) => {\n    return Templates.render('mod_forum/local/grades/local/grader/user_picker/user', context);\n};\n\nconst bindEvents = (root, users, currentUserIndex, showUserCallback) => {\n    root.addEventListener('click', (e) => {\n        const button = e.target.closest(Selectors.actions.changeUser);\n        if (button) {\n            currentUserIndex += parseInt(button.dataset.direction);\n            showUser(root, users, currentUserIndex, showUserCallback);\n        }\n    });\n};\n\nconst showUser = async(root, users, currentUserIndex, showUserCallback) => {\n    const user = {\n        ...users[currentUserIndex],\n        total: users.length,\n        displayIndex: currentUserIndex + 1,\n    };\n    const [html] = await Promise.all([renderUserChange(user), showUserCallback(user)]);\n    const userRegion = root.querySelector(Selectors.regions.userRegion);\n    Templates.replaceNodeContents(userRegion, html, '');\n};\n\nexport const buildPicker = async(users, currentUserID, showUserCallback) => {\n    let root = document.createElement('div');\n\n    const [html] = await Promise.all([renderNavigator()]);\n    Templates.replaceNodeContents(root, html, '');\n\n    const currentUserIndex = users.findIndex((user) => {\n        return user.id === parseInt(currentUserID);\n    });\n\n    showUser(root, users, currentUserIndex, showUserCallback);\n\n    bindEvents(root, users, currentUserIndex, showUserCallback);\n\n    return root;\n};\n"],"file":"user_picker.min.js"}