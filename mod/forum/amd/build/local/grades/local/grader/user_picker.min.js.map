{"version":3,"sources":["../../../../../src/local/grades/local/grader/user_picker.js"],"names":["_init","items","index","firstName","firstname","lastName","lastname","displayindex","total","length","_renderNavigator","context","Templates","render","_renderUserChange","_cacheDom","html","widget","document","createElement","innerHTML","paginator","querySelector","nextButton","previousButton","_nextUser","displayIndex","Promise","all","js","replaceNodeContents","Selectors","regions","paginatorReplace","_previousUser","_bindEvents","addEventListener","buildPicker"],"mappings":"oNAAA,OACA,O,8xBAGMA,CAAAA,CAAK,CAAG,SAACC,CAAD,CAAQC,CAAR,CAAkB,CAG5B,MAAO,CACHC,SAAS,CAAEF,CAAK,CAACC,CAAD,CAAL,CAAaE,SADrB,CAEHC,QAAQ,CAAEJ,CAAK,CAACC,CAAD,CAAL,CAAaI,QAFpB,CAGHC,YAAY,CAAEL,CAAK,CAAG,CAHnB,CAIHM,KAAK,CAAEP,CAAK,CAACQ,MAJV,CAMV,C,CAEKC,CAAgB,CAAG,SAACC,CAAD,CAAa,CAClC,MAAOC,WAAUC,MAAV,CAAiB,sDAAjB,CAAyEF,CAAzE,CACV,C,CAEKG,CAAiB,CAAG,SAACH,CAAD,CAAa,CACnC,MAAOC,WAAUC,MAAV,CAAiB,2DAAjB,CAA8EF,CAA9E,CACV,C,CAEMI,CAAS,CAAG,SAACC,CAAD,CAAU,CACzB,GAAIC,CAAAA,CAAM,CAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb,CACAF,CAAM,CAACG,SAAP,CAAmBJ,CAAnB,CAFyB,GAGrBK,CAAAA,CAAS,CAAGJ,CAAM,CAACK,aAAP,CAAqB,6BAArB,CAHS,CAIrBC,CAAU,CAAGF,CAAS,CAACC,aAAV,CAAwB,6BAAxB,CAJQ,CAKrBE,CAAc,CAAGH,CAAS,CAACC,aAAV,CAAwB,iCAAxB,CALI,CAMzB,MAAO,CAACC,CAAD,CAAaC,CAAb,CACV,C,CAGKC,CAAS,4CAAG,WAAOxB,CAAP,CAAcC,CAAd,+FACdA,CAAK,GAELD,CAAK,CAACC,CAAD,CAAL,CAAawB,YAAb,CAA4BxB,CAAK,EAAjC,CAHc,eAKSyB,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACd,CAAiB,CAACb,CAAK,CAACC,CAAD,CAAN,CAAlB,CAAZ,CALT,0BAKTc,CALS,MAKHa,CALG,MAMdjB,UAAUkB,mBAAV,CAA8BC,UAAUC,OAAV,CAAkBC,gBAAhD,CAAkEjB,CAAlE,CAAwEa,CAAxE,EANc,wCAAH,uD,CAWTK,CAAa,4CAAG,WAAOjC,CAAP,CAAcC,CAAd,+FAClBA,CAAK,GAELD,CAAK,CAACC,CAAD,CAAL,CAAawB,YAAb,CAA4BxB,CAAK,EAAjC,CAHkB,eAKKyB,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACd,CAAiB,CAACb,CAAK,CAACC,CAAD,CAAN,CAAlB,CAAZ,CALL,0BAKbc,CALa,MAKPa,CALO,MAMlBjB,UAAUkB,mBAAV,CAA8BC,UAAUC,OAAV,CAAkBC,gBAAhD,CAAkEjB,CAAlE,CAAwEa,CAAxE,EANkB,wCAAH,uD,CAWbM,CAAW,CAAG,SAACZ,CAAD,CAAaC,CAAb,CAA6BvB,CAA7B,CAAoCC,CAApC,CAA8C,CAC9DqB,CAAU,CAACa,gBAAX,CAA4B,OAA5B,CAAqC,UAAW,CAC5CX,CAAS,CAACxB,CAAD,CAAQC,CAAR,CACZ,CAFD,EAGAsB,CAAc,CAACY,gBAAf,CAAgC,OAAhC,CAAyC,UAAW,CAChDF,CAAa,CAACjC,CAAD,CAAQC,CAAR,CAChB,CAFD,CAGH,C,CAEYmC,CAAW,4CAAG,WAAOpC,CAAP,CAAcC,CAAd,yGACnBS,CADmB,CACTX,CAAK,CAACC,CAAD,CAAQC,CAAR,CADI,gBAGAyB,CAAAA,OAAO,CAACC,GAAR,CAAY,CAAClB,CAAgB,CAACC,CAAD,CAAjB,CAAZ,CAHA,0BAGlBK,CAHkB,MAGZa,CAHY,QAKYd,CAAS,CAACC,CAAD,CALrB,UAKlBO,CALkB,MAKNC,CALM,MAOvBW,CAAW,CAACZ,CAAD,CAAaC,CAAb,CAA6BvB,CAA7B,CAAoCC,CAApC,CAAX,CAPuB,yBAShB,CAACc,CAAD,CAAOa,CAAP,CATgB,2CAAH,uD","sourcesContent":["import Templates from 'core/templates';\nimport Selectors from './user_picker/selectors';\n//import PubSub from 'core/pubsub';\n\nconst _init = (items, index) => {\n    // TODO generate the full name from PHP function.\n\n    return {\n        firstName: items[index].firstname,\n        lastName: items[index].lastname,\n        displayindex: index + 1,\n        total: items.length,\n    };\n};\n\nconst _renderNavigator = (context) => {\n    return Templates.render('mod_forum/local/grades/unified_grader/user_navigator', context);\n};\n\nconst _renderUserChange = (context) => {\n    return Templates.render('mod_forum/local/grades/unified_grader/user_navigator_user', context);\n};\n\nconst  _cacheDom = (html) => {\n    let widget = document.createElement('div');\n    widget.innerHTML = html;\n    let paginator = widget.querySelector('[data-grader=\"paginator\"]');\n    let nextButton = paginator.querySelector('[data-action=\"next-user\"]');\n    let previousButton = paginator.querySelector('[data-action=\"previous-user\"]');\n    return [nextButton, previousButton];\n};\n\n// Use the next index or the given index here.\nconst _nextUser = async (items, index) => {\n    index++;\n\n    items[index].displayIndex = index++;\n\n    let [html, js] = await Promise.all([_renderUserChange(items[index])]);\n    Templates.replaceNodeContents(Selectors.regions.paginatorReplace, html, js);\n\n    // PubSub\n};\n\nconst _previousUser = async (items, index) => {\n    index--;\n\n    items[index].displayIndex = index++;\n\n    let [html, js] = await Promise.all([_renderUserChange(items[index])]);\n    Templates.replaceNodeContents(Selectors.regions.paginatorReplace, html, js);\n\n    // PubSub\n};\n\nconst _bindEvents = (nextButton, previousButton, items, index) => {\n    nextButton.addEventListener('click', function() {\n        _nextUser(items, index);\n    });\n    previousButton.addEventListener('click', function() {\n        _previousUser(items, index);\n    });\n};\n\nexport const buildPicker = async (items, index) => {\n    let context = _init(items, index);\n\n    let [html, js] = await Promise.all([_renderNavigator(context)]);\n\n    let [nextButton, previousButton] = _cacheDom(html);\n\n    _bindEvents(nextButton, previousButton, items, index);\n\n    return [html, js];\n};\n"],"file":"user_picker.min.js"}