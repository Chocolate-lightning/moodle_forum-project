{"version":3,"sources":["../../../../../src/local/grades/local/grader/user_picker.js"],"names":["renderNavigator","Templates","render","renderUserChange","context","bindEvents","root","users","currentUserIndex","addEventListener","e","target","matches","Selectors","actions","changeUser","parseInt","dataset","direction","showUser","user","total","length","displayIndex","html","userRegion","querySelector","regions","replaceNodeContents","buildPicker","currentUserID","document","createElement","Promise","all","findIndex","id"],"mappings":"oNAAA,OACA,O,ouCAGMA,CAAAA,CAAe,CAAG,UAAM,CAC1B,MAAOC,WAAUC,MAAV,CAAiB,iDAAjB,CAAoE,EAApE,CACV,C,CAEKC,CAAgB,CAAG,SAACC,CAAD,CAAa,CAClC,MAAOH,WAAUC,MAAV,CAAiB,sDAAjB,CAAyEE,CAAzE,CACV,C,CAEKC,CAAU,CAAG,SAACC,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAmC,CAClDF,CAAI,CAACG,gBAAL,CAAsB,OAAtB,CAA+B,SAACC,CAAD,CAAO,CAClC,GAAIA,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBC,UAAUC,OAAV,CAAkBC,UAAnC,CAAJ,CAAoD,CAChDP,CAAgB,EAAIQ,QAAQ,CAACN,CAAC,CAACC,MAAF,CAASM,OAAT,CAAiBC,SAAlB,CAA5B,CACAC,CAAQ,CAACb,CAAD,CAAOC,CAAP,CAAcC,CAAd,CACX,CACJ,CALD,CAMH,C,CAEKW,CAAQ,4CAAG,WAAMb,CAAN,CAAYC,CAAZ,CAAmBC,CAAnB,6FACPY,CADO,MAENb,CAAK,CAACC,CAAD,CAFC,EAGTa,KAAK,CAAEd,CAAK,CAACe,MAHJ,CAITC,YAAY,CAAEf,CAAgB,CAAG,CAJxB,kBAMML,CAAAA,CAAgB,CAACiB,CAAD,CANtB,QAMPI,CANO,QAOPC,CAPO,CAOMnB,CAAI,CAACoB,aAAL,CAAmBb,UAAUc,OAAV,CAAkBF,UAArC,CAPN,CAQbxB,UAAU2B,mBAAV,CAA8BH,CAA9B,CAA0CD,CAA1C,CAAgD,EAAhD,EARa,wCAAH,uD,CAWDK,CAAW,4CAAG,WAAOtB,CAAP,CAAcuB,CAAd,iGACnBxB,CADmB,CACZyB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CADY,gBAGFC,CAAAA,OAAO,CAACC,GAAR,CAAY,CAAClC,CAAe,EAAhB,CAAZ,CAHE,0BAGhBwB,CAHgB,MAIvBvB,UAAU2B,mBAAV,CAA8BtB,CAA9B,CAAoCkB,CAApC,CAA0C,EAA1C,EAEMhB,CANiB,CAMED,CAAK,CAAC4B,SAAN,CAAgB,SAACf,CAAD,CAAU,CAC/C,MAAOA,CAAAA,CAAI,CAACgB,EAAL,GAAYpB,QAAQ,CAACc,CAAD,CAC9B,CAFwB,CANF,CAUvBX,CAAQ,CAACb,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAR,CAIAH,CAAU,CAACC,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAV,CAduB,yBAgBhBF,CAhBgB,2CAAH,uD","sourcesContent":["import Templates from 'core/templates';\nimport Selectors from './user_picker/selectors';\n//import PubSub from 'core/pubsub';\n\nconst renderNavigator = () => {\n    return Templates.render('mod_forum/local/grades/local/grader/user_picker', {});\n};\n\nconst renderUserChange = (context) => {\n    return Templates.render('mod_forum/local/grades/local/grader/user_picker/user', context);\n};\n\nconst bindEvents = (root, users, currentUserIndex) => {\n    root.addEventListener('click', (e) => {\n        if (e.target.matches(Selectors.actions.changeUser)) {\n            currentUserIndex += parseInt(e.target.dataset.direction);\n            showUser(root, users, currentUserIndex);\n        }\n    });\n};\n\nconst showUser = async(root, users, currentUserIndex) => {\n    const user = {\n        ...users[currentUserIndex],\n        total: users.length,\n        displayIndex: currentUserIndex + 1,\n    };\n    const html = await renderUserChange(user);\n    const userRegion = root.querySelector(Selectors.regions.userRegion);\n    Templates.replaceNodeContents(userRegion, html, '');\n};\n\nexport const buildPicker = async (users, currentUserID) => {\n    let root = document.createElement('div');\n\n    const [html] = await Promise.all([renderNavigator()]);\n    Templates.replaceNodeContents(root, html, '');\n\n    const currentUserIndex = users.findIndex((user) => {\n        return user.id === parseInt(currentUserID);\n    });\n\n    showUser(root, users, currentUserIndex);\n\n    //let [nextButton, previousButton] = cacheDom(html);\n\n    bindEvents(root, users, currentUserIndex);\n\n    return root;\n};\n"],"file":"user_picker.min.js"}