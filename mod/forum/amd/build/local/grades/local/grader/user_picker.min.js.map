{"version":3,"sources":["../../../../../src/local/grades/local/grader/user_picker.js"],"names":["renderNavigator","Templates","render","renderUserChange","context","bindEvents","root","users","currentUserIndex","showUserCallback","addEventListener","e","target","matches","Selectors","actions","changeUser","parseInt","dataset","direction","showUser","user","total","length","displayIndex","Promise","all","html","userRegion","querySelector","regions","replaceNodeContents","buildPicker","currentUserID","document","createElement","findIndex","id"],"mappings":"oNAAA,OACA,O,ouCAGMA,CAAAA,CAAe,CAAG,UAAM,CAC1B,MAAOC,WAAUC,MAAV,CAAiB,iDAAjB,CAAoE,EAApE,CACV,C,CAEKC,CAAgB,CAAG,SAACC,CAAD,CAAa,CAClC,MAAOH,WAAUC,MAAV,CAAiB,sDAAjB,CAAyEE,CAAzE,CACV,C,CAEKC,CAAU,CAAG,SAACC,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CAAqD,CACpEH,CAAI,CAACI,gBAAL,CAAsB,OAAtB,CAA+B,SAACC,CAAD,CAAO,CAClC,GAAIA,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBC,UAAUC,OAAV,CAAkBC,UAAnC,CAAJ,CAAoD,CAChDR,CAAgB,EAAIS,QAAQ,CAACN,CAAC,CAACC,MAAF,CAASM,OAAT,CAAiBC,SAAlB,CAA5B,CACAC,CAAQ,CAACd,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CACX,CACJ,CALD,CAMH,C,CAEKW,CAAQ,4CAAG,WAAMd,CAAN,CAAYC,CAAZ,CAAmBC,CAAnB,CAAqCC,CAArC,iGACPY,CADO,MAENd,CAAK,CAACC,CAAD,CAFC,EAGTc,KAAK,CAAEf,CAAK,CAACgB,MAHJ,CAITC,YAAY,CAAEhB,CAAgB,CAAG,CAJxB,kBAMQiB,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACvB,CAAgB,CAACkB,CAAD,CAAjB,CAAyBZ,CAAgB,CAACY,CAAD,CAAzC,CAAZ,CANR,0BAMNM,CANM,MAOPC,CAPO,CAOMtB,CAAI,CAACuB,aAAL,CAAmBf,UAAUgB,OAAV,CAAkBF,UAArC,CAPN,CAQb3B,UAAU8B,mBAAV,CAA8BH,CAA9B,CAA0CD,CAA1C,CAAgD,EAAhD,EARa,wCAAH,uD,CAWDK,CAAW,4CAAG,WAAOzB,CAAP,CAAc0B,CAAd,CAA6BxB,CAA7B,iGACnBH,CADmB,CACZ4B,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CADY,gBAGFV,CAAAA,OAAO,CAACC,GAAR,CAAY,CAAC1B,CAAe,EAAhB,CAAZ,CAHE,0BAGhB2B,CAHgB,MAIvB1B,UAAU8B,mBAAV,CAA8BzB,CAA9B,CAAoCqB,CAApC,CAA0C,EAA1C,EAEMnB,CANiB,CAMED,CAAK,CAAC6B,SAAN,CAAgB,SAACf,CAAD,CAAU,CAC/C,MAAOA,CAAAA,CAAI,CAACgB,EAAL,GAAYpB,QAAQ,CAACgB,CAAD,CAC9B,CAFwB,CANF,CAUvBb,CAAQ,CAACd,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CAAR,CAIAJ,CAAU,CAACC,CAAD,CAAOC,CAAP,CAAcC,CAAd,CAAgCC,CAAhC,CAAV,CAduB,yBAgBhBH,CAhBgB,2CAAH,uD","sourcesContent":["import Templates from 'core/templates';\nimport Selectors from './user_picker/selectors';\n//import PubSub from 'core/pubsub';\n\nconst renderNavigator = () => {\n    return Templates.render('mod_forum/local/grades/local/grader/user_picker', {});\n};\n\nconst renderUserChange = (context) => {\n    return Templates.render('mod_forum/local/grades/local/grader/user_picker/user', context);\n};\n\nconst bindEvents = (root, users, currentUserIndex, showUserCallback) => {\n    root.addEventListener('click', (e) => {\n        if (e.target.matches(Selectors.actions.changeUser)) {\n            currentUserIndex += parseInt(e.target.dataset.direction);\n            showUser(root, users, currentUserIndex, showUserCallback);\n        }\n    });\n};\n\nconst showUser = async(root, users, currentUserIndex, showUserCallback) => {\n    const user = {\n        ...users[currentUserIndex],\n        total: users.length,\n        displayIndex: currentUserIndex + 1,\n    };\n    const [html] = await Promise.all([renderUserChange(user), showUserCallback(user)]);\n    const userRegion = root.querySelector(Selectors.regions.userRegion);\n    Templates.replaceNodeContents(userRegion, html, '');\n};\n\nexport const buildPicker = async (users, currentUserID, showUserCallback) => {\n    let root = document.createElement('div');\n\n    const [html] = await Promise.all([renderNavigator()]);\n    Templates.replaceNodeContents(root, html, '');\n\n    const currentUserIndex = users.findIndex((user) => {\n        return user.id === parseInt(currentUserID);\n    });\n\n    showUser(root, users, currentUserIndex, showUserCallback);\n\n    //let [nextButton, previousButton] = cacheDom(html);\n\n    bindEvents(root, users, currentUserIndex, showUserCallback);\n\n    return root;\n};\n"],"file":"user_picker.min.js"}